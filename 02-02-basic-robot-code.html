<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Anatomy of a Robot Program - Team 100 Software Binder</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="02-00-controls-basics.html"><strong aria-hidden="true">2.</strong> Control Systems Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="02-01-sense-interpret-act.html"><strong aria-hidden="true">2.1.</strong> Sense, Interpret, Act</a></li><li class="chapter-item expanded "><a href="02-02-basic-robot-code.html" class="active"><strong aria-hidden="true">2.2.</strong> Anatomy of a Robot Program</a></li><li class="chapter-item expanded "><a href="02-03-sensors.html"><strong aria-hidden="true">2.3.</strong> Sensors</a></li></ol></li><li class="chapter-item expanded "><a href="03-00-java-basics.html"><strong aria-hidden="true">3.</strong> Java Basics</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Team 100 Software Binder</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#anatomy-of-a-basic-robot-program" id="anatomy-of-a-basic-robot-program">Anatomy of a Basic Robot Program</a></h1>
<p>We will begin by talking within the context of a VEX robot since it is much more simple than our FRC code. The code that you see below is a fully working program for the ProtoBot VEX robots that you will build early during your time on Team 100.</p>
<h2><a class="header" href="#the-concept" id="the-concept">The Concept</a></h2>
<p>As you read through the code, remember the diagram below: 
<img src="./static/csa-cycle-vex.svg" alt="Control Systems Cycle" /></p>
<p>This diagram explains the high level of what we do when running the ProtoBot code. When we start, our robot begins by <em>sensing</em> its current state from the sensors and joysticks. It then <em>interprets</em> the sensors to define our <em>actions</em> which are the motors moving.</p>
<p>In the code, you will see how interpretation can exist beyond simply taking joystick inputs as we use our limit switches to see if it is safe to move our arm. In this snippet, you can see how we make a decision based on:</p>
<ol>
<li>What the driver <strong>wants</strong> to do and</li>
<li>Whether it is safe to move the action</li>
</ol>
<blockquote>
<p>Lines that start with // are comments and are used to explain, but have no impact on how the robot actually works.</p>
</blockquote>
<pre><code class="language-c">// Does the driver want to move up and is it safe to do so?
if((leftButtonUp == 1) &amp;&amp; (armUpLimitSwitch == 0))
{
    // If so, move up
    motor[Arm] = 127;
}
// Otherwise, does the driver want to move down and is it safe to do so?
else if ((leftButtonDown == 1) &amp;&amp; (armDownLimitSwitch == 0))
{
    // If so, move down
    motor[Arm] = -127;
}
// Otherwise, the driver either does not want to move or wants to make an unsafe movement
else
{
    // In which case we will not allow the arm to move.
    motor[Arm] = 0;  // if you don't set the motors to 0, they will keep running forever
}
</code></pre>
<h2><a class="header" href="#the-code" id="the-code">The Code</a></h2>
<pre><code class="language-c">////////////////////////////////////////////////////////////////////
// Protobot.c                                                     //
////////////////////////////////////////////////////////////////////
//                                                                //
// This code is the end code for a fully functional VEX protobot. //
//                                                                //
// It demonstrates many of the basic concepts of a robot program. //
////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////////////////////
// Configuring Your Robot                                                                    //
///////////////////////////////////////////////////////////////////////////////////////////////
// In RobotC, lines that start with #pragma tell RobotC how your robot is set up.            //
//                                                                                           //
// It has information about where motors are sensors are plugged in, as well as their names. //
///////////////////////////////////////////////////////////////////////////////////////////////
#pragma config(Motor,  port2,           RightDrive,    tmotorServoContinuousRotation, openLoop)
#pragma config(Motor,  port4,           LeftDrive,     tmotorServoContinuousRotation, openLoop)
#pragma config(Motor,  port5,           IntakeWheel,   tmotorServoContinuousRotation, openLoop)
#pragma config(Motor,  port7,           Arm,           tmotorServoContinuousRotation, openLoop)
#pragma config(Sensor, dgtl5,  					ArmUp,         sensorTouch)
#pragma config(Sensor, dgtl6,  					ArmDown,       sensorTouch)

/////////////////////////////////////////////////////////////////////////////////////////////////
// task main()                                                                                 //
/////////////////////////////////////////////////////////////////////////////////////////////////
// When you start running your code, your robot will need to know where to start reading from. //
//                                                                                             //
// In VEX, wherever you see task main is the place where                                       //
// the code starts reading from                                                                //
/////////////////////////////////////////////////////////////////////////////////////////////////
task main()
{
    //////////////////////////////////////////////////////////////////////////////
    // Variables                                                                //
    //////////////////////////////////////////////////////////////////////////////
    // Variable keep track of information. They act like a bucket.              //
    //                                                                          //
    // The word int means that the information in the bucket is a whole number. //
    //                                                                          //
    // For JoystickValues, the values range from -127 to 127.                   //
    // For Buttons and LimitSwitches, the value is either 0 or 1.               //
    //////////////////////////////////////////////////////////////////////////////
    int rightJoystickValue = 0;
    int leftJoystickValue = 0;
    int leftButtonUp = 0;
    int leftButtonDown = 0;
    int rightButtonUp = 0;
    int rightButtonDown = 0;
    int armUpLimitSwitch = 0;
    int armDownLimitSwitch = 0;

    //////////////////////////////////////////////////////////////////////////////////////////////////
    // This code here means that your program will run forever.                                     //
    //                                                                                              //
    // Just like when you read an instruction manual, you start at the beginning and go to the end. //
    // However, if you aren't specifically told to repeat something, you wouldn't know to do so.    //
    // By telling our robot to repeat, it will run our code forever.                                //
    //////////////////////////////////////////////////////////////////////////////////////////////////
    while(1==1)
    {
        ///////////////////////////////////////////////////////////////////////////////////
        // Get joystick and sensor values                                                //
        ///////////////////////////////////////////////////////////////////////////////////
        // This code gets values from the joystick and puts those values into variables. //
        // Once the values are in a variable, we can easily process them.                //
        //                                                                               //
        // The vexRT word tells our robot to look at the joystick.                       //
        // Calls to SensorValue tell our robot to look at the value from an sensor.      //
        ///////////////////////////////////////////////////////////////////////////////////
        rightJoystickValue = vexRT[Ch2];
        leftJoystickValue = vexRT[Ch3];
        leftButtonUp = vexRT[Btn5U];
        leftButtonDown = vexRT[Btn5D];
        rightButtonUp = vexRT[Btn6U];
        rightButtonDown = vexRT[Btn6D];

        armUpLimitSwitch = SensorValue[ArmUp];
        armDownLimitSwitch = SensorValue[ArmDown];


        ////////////////////////////////////////////////////////////////////
        // Interpret and Act                                              //
        ////////////////////////////////////////////////////////////////////
        // This big block of code tells our robot to process our inputs   //
        // (sensors and joystick values) and identify an output (motors). //
        //                                                                //
        // The if statements work to identify the driver's intention.     //
        // Does the driver want to move the arm up? Is it safe to move    //
        // the arm up? All of that is evaluated within the parentheses    //
        // next to the word if.                                           //
        //                                                                //
        // The calls, such as motor[Arm] = 127; tell the robot to move    //
        // a motor at a certain power, ranging from -127 to 127.          //
        //                                                                //
        // Else acts as an aditional way to program logic, where the      //
        // robot will look and see if that logic is valid if and only     //
        // if the if statement above it was not true.                     //
        ////////////////////////////////////////////////////////////////////
        motor[RightDrive] = rightJoystickValue;
        motor[LeftDrive] = leftJoystickValue * -1;

        if((leftButtonUp == 1) &amp;&amp; (armUpLimitSwitch == 0))
        {
            motor[Arm] = 127;
        }
        else if ((leftButtonDown == 1) &amp;&amp; (armDownLimitSwitch == 0))
        {
            motor[Arm] = -127;
        }
        else
        {
            motor[Arm] = 0;  // if you don't set the motors to 0, they will keep running forever
        }

        if(rightButtonUp == 1)
        {
            motor[IntakeWheel] = 127;
        }
        else if (rightButtonDown == 1)
        {
            motor[IntakeWheel] = -127;
        }
        else
        {
            motor[IntakeWheel] = 0;
        }
    }
  }
</code></pre>
<h2><a class="header" href="#the-code-explained" id="the-code-explained">The Code Explained</a></h2>
<h3><a class="header" href="#configuration" id="configuration">Configuration</a></h3>
<p>By default, your robot will not know what is plugged into what port on your VEX Cortex. At the very top of the code, we can tell our robot what is plugged into where. This has a couple of benefits:</p>
<ul>
<li>Creates a source of truth for what is plugged into where into our program</li>
<li>Allows us to refer to motors and sensors by names (e.g. <code>IntakeWheel</code>) rather than ports</li>
<li>Makes it easy to update the code when there is a change to ports, since a device like <code>IntakeWheel</code> can just be reassigned to a new port, rather than having to replace all uses in the code</li>
</ul>
<p>The configuration lines are not written by hand, but rather configured through the RobotC Robot Configuration window.</p>
<h3><a class="header" href="#task-main" id="task-main">task main()</a></h3>
<p>When your robot reads your code, it needs to know where to start. Imagine how it difficult it would be for you to assemble a bed if there was no starting point! When you turn your Cortex on, it knows to look for something called <code>task main()</code> as the starting point for your code.</p>
<p>Since our robot knows to look to this location as the starting point, we put our entire robot code inside of this task.</p>
<h3><a class="header" href="#variables" id="variables">Variables</a></h3>
<p>Variables are like a bucket that can store information. We put our sensor and joystick values into buckets so that we can then use their values to <em>interpret</em> intent.</p>
<p>Variables have a specific <em>type</em> associated to them. A type is a specific format of information. Think of it like a calculator. It wouldn't make sense to put a photograph in to your calculator. So, your calculator expects your numbers in a specific format, usually decimals. Programs usually store numbers, true/false, and text. The types that are common in RobotC are:</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Min</th><th>Max</th><th>Example Values</th></tr></thead><tbody>
<tr><td>int</td><td>Integer</td><td>-32,767</td><td>32,767</td><td>-1, 15</td></tr>
<tr><td>bool</td><td>True/False</td><td></td><td></td><td>true, false</td></tr>
<tr><td>string</td><td>Text</td><td></td><td></td><td>&quot;abc&quot;</td></tr>
<tr><td>float</td><td>Decimal</td><td>Varies</td><td>Varies</td><td>0.123</td></tr>
<tr><td>char</td><td>Integer</td><td>-127</td><td>127</td><td>'A', 1</td></tr>
</tbody></table>
<p>Our code exclusively uses int and bool. When we use <a href="#conditionals">conditionals</a>, we use bools even if we don't define them.</p>
<h4><a class="header" href="#one-value" id="one-value">One Value</a></h4>
<blockquote>
<p>Variables must always have one and only one value</p>
</blockquote>
<p>This is one of the most important concepts in programming. Let's take a look at what this means with one of the lines in our program:</p>
<pre><code class="language-c">int rightJoystickValue = 0;
</code></pre>
<p>Though this line seems simple, it is really powerful. With one line, we can tell our robot to:</p>
<ul>
<li>Create a new variable/bucket of type <code>int</code></li>
<li>Assign the name <code>rightJoystickValue</code> to that new variable</li>
<li>Set <code>rightJoystickValue</code>'s value to <code>0</code>.</li>
</ul>
<p>Now, when we use <code>rightJoystickValue</code> in our code, it returns <code>0</code>. However, <code>rightJoystickValue</code> does not always have to be <code>0</code>. Shortly after in the code, we call</p>
<pre><code class="language-c">rightJoystickValue = vexRT[Ch2];
</code></pre>
<p>This line, once again, does many things with very little code. You will notice that <code>int</code> is missing, since we don't want to create a new variable, we want to override the value of <code>rightJoystickValue</code>.</p>
<p>This line:</p>
<ul>
<li>Asks the joystick for the value of Channel 2</li>
<li>Finds the variable called <code>rightJoystickValue</code></li>
<li>Copies the value from Channel 2 to the bucket called <code>rightJoystickValue</code></li>
</ul>
<h3><a class="header" href="#conditionals" id="conditionals">Conditionals</a></h3>
<p>At the sense of interpreting data is logic. All logic boils down to the following concepts:</p>
<ul>
<li>if</li>
<li>then</li>
<li>else</li>
<li>not</li>
<li>and</li>
<li>or</li>
</ul>
<p>Think about it like this: <em><strong>If</strong> it is <strong>not</strong> raining <strong>and</strong> it is warm, <strong>then</strong> I will go to the beach. <strong>Otherwise</strong>, I will go to the mall</em>.</p>
<p>We can take a look at our code in the same way. Let's take this snippet for an example:</p>
<pre><code class="language-c">if((leftButtonUp == 1) &amp;&amp; (armUpLimitSwitch == 0))
{
    motor[Arm] = 127;
}
else if ((leftButtonDown == 1) &amp;&amp; (armDownLimitSwitch == 0))
{
    motor[Arm] = -127;
}
else
{
    motor[Arm] = 0;  // if you don't set the motors to 0, they will keep running forever
}
</code></pre>
<p>This code can be read as: If the driver is signaling to move the arm up, and the arm is not at its highest position, then move the arm up. However, if that is not true, let's try seeing if the driver wants to move down. If the driver is signalling to move the arm down and it is safe to move down, then move the arm down. However, if neither of the previous are true, the stop the arm.</p>
<p>What situations end up with the arm staying stopped?</p>
<ul>
<li>The driver does not signal to move up or down</li>
<li>The driver signals to move up, but the arm is at the maximum height</li>
<li>The diver signals to move down, but the arm is at the minimum height</li>
</ul>
<p>However, assuming that the arm is not at either extreme, what happens if the driver presses both the up and down button at the same time?</p>
<p>The answer lies in <code>else if</code>. Since we test for up first, if the driver presses up and down at the same time, the up condition being true causes the <code>else if</code> and the <code>else</code> conditions to never be evaluated, the arm will move up. However, if both are pressed and arm is at the maximum, since the first condition would be false, the second would be evaluated and return true, thus moving the arm down.</p>
<h3><a class="header" href="#telling-motors-to-turn" id="telling-motors-to-turn">Telling Motors to Turn</a></h3>
<p>This is the code that tells our motor to turn:</p>
<pre><code class="language-c">motor[Arm] = 127;
</code></pre>
<p>You may notice that this looks like setting a variable. That is because you are setting a variable. <code>motor</code>, just like <code>vexRT</code> is a special variable that the VEX Cortex knows about what can help you interact with the Cortex outputs. </p>
<h2><a class="header" href="#sources" id="sources">Sources</a></h2>
<ul>
<li><a href="https://gitlab.com/-/snippets/2042879">https://gitlab.com/-/snippets/2042879</a></li>
<li><a href="https://www.ddtwo.org/site/handlers/filedownload.ashx?moduleinstanceid=28565&amp;dataid=40000&amp;FileName=RobotC%20Programming%20Guide.pdf">https://www.ddtwo.org/site/handlers/filedownload.ashx?moduleinstanceid=28565&amp;dataid=40000&amp;FileName=RobotC%20Programming%20Guide.pdf</a></li>
<li><a href="https://en.wikipedia.org/wiki/C_data_types">https://en.wikipedia.org/wiki/C_data_types</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="02-01-sense-interpret-act.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="02-03-sensors.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="02-01-sense-interpret-act.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="02-03-sensors.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
